
var cr;
fun fa(var param1)
{
	var cr2 = cr;
	for(var i in 0, 5, 1)
	{
		print("Coroutine " .. i);
		sleep(200);
		yield return;
	}
}

export fun test()
{
	cr = coroutine_create(fa);

	for(var i in 0, 10, 1)
	{
		var state = coroutine_status(cr);
		if(state == "suspended")
		{
			coroutine_resume(cr, 2);
		}
		print("Main " .. state .. i);
		sleep(200);
	}
}
