
var cr;
fun fa(var param1)
{
	var cr2 = cr;
	for(var i = 0; i < 5; i++)
	{
		system.print("\n Coroutine " .. i);
		sleep(1000);
		yield return;
	}
}

export fun test()
{
	cr = system.coroutine_create(fa);

	for(var i = 0; i < 10; i++)
	{
		var state = system.coroutine_status(cr);
		if(state == "suspended")
		{
			system.coroutine_resume(cr, 2);
		}
		system.print("\n Main " .. state .. i);
		sleep(1000);
	}
}
